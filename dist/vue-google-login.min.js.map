{"version":3,"file":"vue-google-login.min.js","sources":["../src/GoogleAuth.js","../node_modules/vue-runtime-helpers/dist/normalize-component.mjs","../src/GoogleLogin.vue","../src/LoaderPlugin.js"],"sourcesContent":["let auth2;\r\nlet loadingPromise;\r\n\r\nconst createScript = () => {\r\n    return new Promise((resolve, reject) => {\r\n        const el = document.getElementById('auth2_script_id');\r\n        if (!el) {\r\n            let gplatformScript = document.createElement('script')\r\n            gplatformScript.setAttribute('src', 'https://apis.google.com/js/platform.js?onload=onGapiLoad')\r\n            gplatformScript.setAttribute(\"async\", true)\r\n            gplatformScript.setAttribute(\"defer\", \"defer\")\r\n            gplatformScript.setAttribute(\"id\", \"auth2_script_id\")\r\n            document.head.appendChild(gplatformScript);\r\n        }\r\n        resolve();\r\n    });\r\n\r\n}\r\n\r\nconst onGapiLoadPromise = (params) => {\r\n    return new Promise((resolve, reject) => {\r\n        window.onGapiLoad = () => {\r\n            window.gapi.load('auth2', () => {\r\n                try {\r\n                    auth2 = window.gapi.auth2.init(\r\n                        Object.assign({}, params)\r\n                    );\r\n                } catch (err) {\r\n                    reject({ err: 'client_id missing or is incorrect, or if you added extra params maybe they are written incorrectly, did you add it to the component or plugin?' })\r\n                }\r\n                resolve(auth2);\r\n            })\r\n        }\r\n    })\r\n}\r\n\r\nconst loadingAuth2 = (params) => {\r\n    if (auth2) {\r\n        return Promise.resolve(auth2);\r\n    } else {\r\n        if (!loadingPromise)\r\n            loadingPromise = onGapiLoadPromise(params);\r\n        return loadingPromise;\r\n    }\r\n}\r\n\r\nconst load = (params) => {\r\n    return Promise.all(\r\n        [loadingAuth2(params), createScript()])\r\n        .then(results => {\r\n            return results[0];\r\n        });\r\n}\r\n\r\nconst wrapper = (f, method) => {\r\n    if (f)\r\n        return f[method]();\r\n    else {\r\n        const err = { err: 'Script not loaded correctly, did you add the plugin or the client_id to the component?' };\r\n        return Promise.reject(err);\r\n    }\r\n}\r\n\r\nconst signIn = () => wrapper(auth2, 'signIn');\r\n\r\nconst signOut = () => wrapper(auth2, 'signOut');\r\n\r\nconst isSignedIn = () => wrapper(auth2.isSignedIn, 'get');\r\n\r\nconst currentUser = () => wrapper(auth2.currentUser, 'get');\r\n\r\nconst grantOfflineAccess = () => wrapper(auth2, 'grantOfflineAccess');\r\n\r\nexport default {\r\n    load,\r\n    signIn,\r\n    signOut,\r\n    isSignedIn,\r\n    currentUser,\r\n    grantOfflineAccess\r\n}\r\n","function normalizeComponent(template, style, script, scopeId, isFunctionalTemplate, moduleIdentifier /* server only */, shadowMode, createInjector, createInjectorSSR, createInjectorShadow) {\r\n    if (typeof shadowMode !== 'boolean') {\r\n        createInjectorSSR = createInjector;\r\n        createInjector = shadowMode;\r\n        shadowMode = false;\r\n    }\r\n    // Vue.extend constructor export interop.\r\n    const options = typeof script === 'function' ? script.options : script;\r\n    // render functions\r\n    if (template && template.render) {\r\n        options.render = template.render;\r\n        options.staticRenderFns = template.staticRenderFns;\r\n        options._compiled = true;\r\n        // functional template\r\n        if (isFunctionalTemplate) {\r\n            options.functional = true;\r\n        }\r\n    }\r\n    // scopedId\r\n    if (scopeId) {\r\n        options._scopeId = scopeId;\r\n    }\r\n    let hook;\r\n    if (moduleIdentifier) {\r\n        // server build\r\n        hook = function (context) {\r\n            // 2.3 injection\r\n            context =\r\n                context || // cached call\r\n                    (this.$vnode && this.$vnode.ssrContext) || // stateful\r\n                    (this.parent && this.parent.$vnode && this.parent.$vnode.ssrContext); // functional\r\n            // 2.2 with runInNewContext: true\r\n            if (!context && typeof __VUE_SSR_CONTEXT__ !== 'undefined') {\r\n                context = __VUE_SSR_CONTEXT__;\r\n            }\r\n            // inject component styles\r\n            if (style) {\r\n                style.call(this, createInjectorSSR(context));\r\n            }\r\n            // register component module identifier for async chunk inference\r\n            if (context && context._registeredComponents) {\r\n                context._registeredComponents.add(moduleIdentifier);\r\n            }\r\n        };\r\n        // used by ssr in case component is cached and beforeCreate\r\n        // never gets called\r\n        options._ssrRegister = hook;\r\n    }\r\n    else if (style) {\r\n        hook = shadowMode\r\n            ? function (context) {\r\n                style.call(this, createInjectorShadow(context, this.$root.$options.shadowRoot));\r\n            }\r\n            : function (context) {\r\n                style.call(this, createInjector(context));\r\n            };\r\n    }\r\n    if (hook) {\r\n        if (options.functional) {\r\n            // register for functional component in vue file\r\n            const originalRender = options.render;\r\n            options.render = function renderWithStyleInjection(h, context) {\r\n                hook.call(context);\r\n                return originalRender(h, context);\r\n            };\r\n        }\r\n        else {\r\n            // inject component registration as beforeCreate hook\r\n            const existing = options.beforeCreate;\r\n            options.beforeCreate = existing ? [].concat(existing, hook) : [hook];\r\n        }\r\n    }\r\n    return script;\r\n}\n\nexport default normalizeComponent;\n//# sourceMappingURL=normalize-component.mjs.map\n","\r\n<template>\r\n\t<div v-if=\"renderParams && !logoutButton\" @click=\"handleClick\" :id=\"id\"></div>\r\n\t<button v-else @click=\"handleClick\" :id=\"id\">\r\n\t\t<slot></slot>\r\n\t</button>\r\n</template>\r\n\r\n<script>\r\n\r\nlet componentId = 0;\r\nimport GoogleAuth from './GoogleAuth';\r\n\r\nexport default {\r\n\tname: 'GoogleLogin',\r\n\tprops: {\r\n\t\tparams: {\r\n\t\t\ttype: Object,\r\n\t\t\trequired: true\r\n\t\t},\r\n\t\t/* offline: {\r\n\t\t\ttype: Boolean,\r\n\t\t\tdefault: false\r\n\t\t}, */\r\n\t\tonCurrentUser: {\r\n\t\t\ttype: Function,\r\n\t\t\tdefault: () => { }\r\n\t\t},\r\n\t\tonSuccess: {\r\n\t\t\ttype: Function,\r\n\t\t\tdefault: () => { }\r\n\t\t},\r\n\t\tonFailure: {\r\n\t\t\ttype: Function,\r\n\t\t\tdefault: () => { }\r\n\t\t},\r\n\t\tlogoutButton: {\r\n\t\t\ttype: Boolean,\r\n\t\t\tdefault: false\r\n\t\t},\r\n\t\trenderParams: {\r\n\t\t\ttype: Object,\r\n\t\t\trequired: false\r\n\t\t}\r\n\t},\r\n\tbeforeCreate() {\r\n\t\tthis.id = `google-signin-btn-${componentId++}`;\r\n\t},\r\n\tmethods: {\r\n\t\thandleClick() {\r\n\t\t\t/* if (this.offline) {\r\n\t\t\t\tGoogleAuth['grantOfflineAccess']({ 'redirect_uri': 'postmessage' }).then(result => {\r\n\t\t\t\t\treturn this.onSuccess(result);\r\n\t\t\t\t}).catch(err => {\r\n\t\t\t\t\treturn this.onFailure(err);\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t} */\r\n\t\t\tconst method = this.logoutButton ? 'signOut' : 'signIn';\r\n\t\t\tGoogleAuth[method]().then(result => {\r\n\t\t\t\treturn this.onSuccess(result);\r\n\t\t\t}).catch(err => {\r\n\t\t\t\treturn this.onFailure(err);\r\n\t\t\t});\r\n\t\t}\r\n\t},\r\n\tmounted() {\r\n\t\tGoogleAuth.load(this.params).then(() => {\r\n\t\t\tif (this.renderParams && this.logoutButton === false) {\r\n\t\t\t\twindow.gapi.signin2.render(this.id, this.renderParams);\r\n\t\t\t}\r\n\t\t\tif (GoogleAuth.isSignedIn()) {\r\n\t\t\t\tthis.onCurrentUser(GoogleAuth.currentUser());\r\n\t\t\t}\r\n\t\t}).catch(err => {\r\n\t\t\tconsole.log(err);\r\n\t\t});\r\n\t}\r\n}\r\n</script>\r\n\r\n<style>\r\n</style>\r\n","import GoogleAuth from './GoogleAuth';\r\n\r\nexport default {\r\n    install (Vue, params) {\r\n        Vue.GoogleAuth = GoogleAuth.load(params);\r\n    }\r\n}"],"names":["auth2","loadingPromise","loadingAuth2","params","Promise","resolve","reject","window","onGapiLoad","gapi","load","init","Object","assign","err","onGapiLoadPromise","wrapper","f","method","all","document","getElementById","gplatformScript","createElement","setAttribute","head","appendChild","then","results","signIn","signOut","isSignedIn","currentUser","grantOfflineAccess","normalizeComponent","template","style","script","scopeId","isFunctionalTemplate","moduleIdentifier","shadowMode","createInjector","createInjectorSSR","createInjectorShadow","options","hook","render","staticRenderFns","_compiled","functional","_scopeId","context","this","$vnode","ssrContext","parent","__VUE_SSR_CONTEXT__","call","_registeredComponents","add","_ssrRegister","$root","$options","shadowRoot","originalRender","h","existing","beforeCreate","concat","install","Vue","GoogleAuth"],"mappings":"iNAAA,IAAIA,EACAC,EAmCEC,EAAe,SAACC,UACdH,EACOI,QAAQC,QAAQL,IAElBC,IACDA,EAtBc,SAACE,UAChB,IAAIC,SAAQ,SAACC,EAASC,GACzBC,OAAOC,WAAa,WAChBD,OAAOE,KAAKC,KAAK,SAAS,eAElBV,EAAQO,OAAOE,KAAKT,MAAMW,KACtBC,OAAOC,OAAO,GAAIV,IAExB,MAAOW,GACLR,EAAO,CAAEQ,IAAK,mJAElBT,EAAQL,UAWKe,CAAkBZ,IAChCF,IAYTe,EAAU,SAACC,EAAGC,MACZD,EACA,OAAOA,EAAEC,YAGFd,QAAQE,OADH,CAAEQ,IAAK,gGAeZ,CACXJ,KA5BS,SAACP,UACHC,QAAQe,IACX,CAACjB,EAAaC,GA5CX,IAAIC,SAAQ,SAACC,EAASC,OACdc,SAASC,eAAe,mBAC1B,KACDC,EAAkBF,SAASG,cAAc,UAC7CD,EAAgBE,aAAa,MAAO,4DACpCF,EAAgBE,aAAa,SAAS,GACtCF,EAAgBE,aAAa,QAAS,SACtCF,EAAgBE,aAAa,KAAM,mBACnCJ,SAASK,KAAKC,YAAYJ,GAE9BjB,SAmCCsB,MAAK,SAAAC,UACKA,EAAQ,OAyBvBC,OAZW,kBAAMb,EAAQhB,EAAO,WAahC8B,QAXY,kBAAMd,EAAQhB,EAAO,YAYjC+B,WAVe,kBAAMf,EAAQhB,EAAM+B,WAAY,QAW/CC,YATgB,kBAAMhB,EAAQhB,EAAMgC,YAAa,QAUjDC,mBARuB,kBAAMjB,EAAQhB,EAAO,4BCvEhD,SAASkC,EAAmBC,EAAUC,EAAOC,EAAQC,EAASC,EAAsBC,EAAoCC,EAAYC,EAAgBC,EAAmBC,GACzI,kBAAfH,IACPE,EAAoBD,EACpBA,EAAiBD,EACjBA,GAAa,GAGjB,MAAMI,EAA4B,mBAAXR,EAAwBA,EAAOQ,QAAUR,EAehE,IAAIS,EAmCJ,GAhDIX,GAAYA,EAASY,SACrBF,EAAQE,OAASZ,EAASY,OAC1BF,EAAQG,gBAAkBb,EAASa,gBACnCH,EAAQI,WAAY,EAEhBV,IACAM,EAAQK,YAAa,IAIzBZ,IACAO,EAAQM,SAAWb,GAGnBE,GAEAM,EAAO,SAAUM,IAEbA,EACIA,GACKC,KAAKC,QAAUD,KAAKC,OAAOC,YAC3BF,KAAKG,QAAUH,KAAKG,OAAOF,QAAUD,KAAKG,OAAOF,OAAOC,aAElB,oBAAxBE,sBACnBL,EAAUK,qBAGVrB,GACAA,EAAMsB,KAAKL,KAAMV,EAAkBS,IAGnCA,GAAWA,EAAQO,uBACnBP,EAAQO,sBAAsBC,IAAIpB,IAK1CK,EAAQgB,aAAef,GAElBV,IACLU,EAAOL,EACD,SAAUW,GACRhB,EAAMsB,KAAKL,KAAMT,EAAqBQ,EAASC,KAAKS,MAAMC,SAASC,cAErE,SAAUZ,GACRhB,EAAMsB,KAAKL,KAAMX,EAAeU,MAGxCN,EACA,GAAID,EAAQK,WAAY,CAEpB,MAAMe,EAAiBpB,EAAQE,OAC/BF,EAAQE,OAAS,SAAkCmB,EAAGd,GAElD,OADAN,EAAKY,KAAKN,GACHa,EAAeC,EAAGd,QAG5B,CAED,MAAMe,EAAWtB,EAAQuB,aACzBvB,EAAQuB,aAAeD,EAAW,GAAGE,OAAOF,EAAUrB,GAAQ,CAACA,GAGvE,OAAOT,ECtEX,8kCCAe,CACXiC,iBAASC,EAAKpE,GACVoE,EAAIC,WAAaA,EAAW9D,KAAKP"}